---
layout: post
title: Hogy működik a Flightradar24? Akár én is vehetem a repülőgépekről érkező jeleket?
date: '2013-10-27T15:59:00.000-07:00'
author: István Viczián
tags:
- Linux
- windows
- aircraft
- Raspberry PI
modified_time: '2014-07-21T12:10:44.020-07:00'
thumbnail: http://4.bp.blogspot.com/-AuZjfVotL3M/Um2ZLd6ZyWI/AAAAAAAALDU/msa8MY-YV1Q/s72-c/flightradar.png
blogger_id: tag:blogger.com,1999:blog-5585230159113108250.post-8153823738956226875
blogger_orig_url: http://ext.jtechlog.hu/2013/10/hogy-mukodik-flightradar24-akar-en-is.html
---

<p>A <a href="http://www.flightradar24.com">Flightradar24</a> egy érdekes szolgáltatás, mely valós időben jeleníti meg a Google Mapsen a legtöbb repülőgép helyzetét, és számos információt, mint típus, lajstromjel, járatszám, magasság, sebesség, stb. Egyrészt elérhető weben is, de az összes nagy mobil platformon is van kliense.</p>

<div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-AuZjfVotL3M/Um2ZLd6ZyWI/AAAAAAAALDU/msa8MY-YV1Q/s1600/flightradar.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-AuZjfVotL3M/Um2ZLd6ZyWI/AAAAAAAALDU/msa8MY-YV1Q/s320/flightradar.png" /></a></div>

<p>Hogyan is működik? A szolgáltatás több forrásból gyűjti be az adatokat, ezek közül a legfontosabb az ADS-B, de figyelembe veszi még az MLAT és FAA adatokat, valamint adatokat vesz át a repülőtársaságoktól, repterekről, sőt saját adatbázissal is rendelkezik. A legfontosabb mindenképp az <a href="http://en.wikipedia.org/wiki/Automatic_dependent_surveillance-broadcast">ADS-B</a> (Automatic dependent surveillance-broadcast), mely széles körben alkalmazott eljárás a repülőgépek nyomon követésére. Alapja, hogy a repülőgépek műholdas helyzetmeghatározó rendszer segítségével (pl. GPS) ismerik a saját pozíciójukat, és ezt egy csomó más adattal együtt rádiófrekvencián keresztül sugározzák. Ezeket a jeleket földi vevőkészülékek veszik, és küldik az adatokat a Flightradar24 szolgáltatásnak.</p>

<p>A következő adatokat küldi a gép: lajstromjel, magasság, heading - a repülőgép hosszanti tengelyének iránya, géptengelyirány -, pozíció, squawk, sebesség. A következőket fogadja a földi adótól: időjárás (FIS-B), terep, információkat különböző veszélyekről és tiltásokról (rendre <a href="http://en.wikipedia.org/wiki/NOTAM">NOTAM</a>, és <a href="http://en.wikipedia.org/wiki/Temporary_flight_restriction#Temporary_flight_restrictions">TFR</a> TIS-B használatával) és forgalmi adatok (környező gépek lajstromjele, magassága, géptengelyiránya, sebessége és távolsága).</p>

<div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-keQZDUWTBE0/Um2Y8jxtzsI/AAAAAAAALCs/Axh_VK4mZkE/s1600/adsb.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-keQZDUWTBE0/Um2Y8jxtzsI/AAAAAAAALCs/Axh_VK4mZkE/s320/adsb.jpg" /></a></div>

<p>Nem minden repülőgépen van ilyen szerkezet, de a különböző szabályozásoknak köszönhetően egyre többre kerül, hiszen ez a technológia lesz az elsődleges felügyeleti rendszer, átvéve ezt a szerepet a radaroktól. A repülők mintegy 60%-án van ilyen berendezés, főként Európában. A sugárzás magas frekvencián történik (1090 MHz), így egy földi antenna kb. 250 - 400 km távolságból veheti a jeleket. Európa 98%-a le van fedve vevőkészülékekkel. Vannak persze kevésbé lefedett területek, és a  távolság miatt az óceánok felett repülő gépek jeleit sem egyszerű fogni. Az egyesült államokban a klasszikus radar alapú rendszert a <a href="http://en.wikipedia.org/wiki/Next_Generation_Air_Transportation_System">NextGen</a> fogja leváltani a 2012 - 2015 közötti időszakban, melynek négy fő pontja közül az egyik az ADS-B bevezetése. Ez lehetővé teszi, hogy a gépek közelebb mehessenek egymáshoz, jobb útvonalon repülve, ezzel üzemanyagot és időt megtakarítva.</p>

<p>Mi volt az ADS-B technológia előtt, mi van, ha a gépet még nem szerelték fel ADS-B technológiával? Mint említettem, az ADS-B a radarokat hivatott leváltani. Az elsődleges radar azonban csak a repülőgép helyzetét ismeri, hiányoznak egyéb járulékos információk. Ezért létezik egy másik technológia is, a <a href="http://en.wikipedia.org/wiki/Secondary_Surveillance_Radar">secondary surveillance radar</a> (SSR). A földi állomás un. interrogációs impulzusokat küld a gépnek (1030 MHz frekvencián), amit egy gépre szerelt transzponder (transmitter és responder szavak keresztezéséből) vesz, és válaszol (1090 MHz frekvencián). Ezt a földön egy másik radar veszi. A régebbi transzponderek Mode A és Mode C módban voltak képesek működni, előbbi alkalmas a gép négyjegyű azonosítójának, az utóbbi pedig a magasságának elküldésére. A négyjegyű azonosító visszaküldése a "Squawk". A számjegyek 0-tól 7-ig állíthatóak, így 4096 különböző lehetőség van. Ebből adódik, hogy ez nem fix, hiszen a gépeket nem lehet ezzel egyedileg azonosítani, hanem a pilóta állíthatja be. A Mode S már modernebb, egyrészt minden géphez tartozik egy egyedi 24-bites számsor (ICAO), amit képes elküldeni, valamint egy új protokollt is bevezet, melyen át egyéb információk is küldhetőek, pl. a gép sebessége, irányszöge, üzemanyagszintje, stb. Ezen kívül lehetőség van két gép közötti kommunikációra is, veszélyes helyzetekben képes lekommunikálni, hogy melyik emelkedjen, és melyik süllyedjen.</p>

<div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-sutGN2zsLQY/Um2ZH7QDzXI/AAAAAAAALDM/FfD0PZvGwm0/s1600/PA251740.JPG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://3.bp.blogspot.com/-sutGN2zsLQY/Um2ZH7QDzXI/AAAAAAAALDM/FfD0PZvGwm0/s320/PA251740.JPG" /></a></div>

<p>A Flightradar24 speciális földi vevői szintén ezeket a jeleket fogják. Ezekből <a href="http://en.wikipedia.org/wiki/Multilateration">multilateration</a> (MLAT) segítségével számítják ki (10-100 méteres pontossággal) a repülőgép helyzetét. Ezekben a földi vevőkben ugyanis mindegyikben van egy GPS, így ismerik a saját koordinátájukat, valamint mivel a GPS technológia is idő alapú távolságmérésen alapul, egy rendkívül pontos (atomórához igazított) órával is rendelkeznek. Így a földi vevők pozíciójából, valamint abból, hogy a jel ezekhez mennyi idő alatt ér el (Time Difference of Arrival - TDOA), ki tudják számolni a repülőgép helyzetét. Ehhez minimum négy földi vevő kell.</p>

<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-B6lY_oZp7xw/Um2ZDa4GC1I/AAAAAAAALDE/DMLdYmbxtPM/s1600/Multilateration.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-B6lY_oZp7xw/Um2ZDa4GC1I/AAAAAAAALDE/DMLdYmbxtPM/s320/Multilateration.jpg" /></a></div>

<p>Az ADS-B adók módosított Mode S transzponderek.</p>

<p>A Flightradar24 ezen kívül adatot vesz át a Szövetségi Repülési Hivataltól (Federal Aviation Administration, USA - FAA) is vesz át adatokat. Ezek azonban a jelenlegi szabályozás miatt 5 perces késleltetéssel érkeznek.</p> 

<p>Hogyan helyezte el a Flightradar24 a földi vevőket, hogy ilyen nagy lefedettséget tudott elérni? Úgy, hogy bárki rendelhet ilyen egységet. Abban az esetben, ha olyan helyen vagy, ahol alacsony a lefedettség, <a href="http://www.flightradar24.com/free-ads-b-equipment">ingyen kaphatsz ilyent</a>. A szerkezet valójában egy kis számítógép, egy GPS modullal, és egy Mode-S Beast ADS-B vevővel és dekóderrel, ezen kívül jár hozzá egy GPS és ADS-B antenna, és a megfelelő kábelek. A tetőre kell szerelni az antennát, hogy 360 fokban tudja venni a jeleket, és hálózatra kell dugni, hogy a nap 24 órájában küldje az adatokat a Flightradar24 szolgáltatásnak. Ekkor persze ingyen kapunk Pro tagságot.</p>

<div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-8o3ogwLGfcI/Um2ZBuURtYI/AAAAAAAALC8/khOtN8bNZTg/s1600/free-ads-b-equipment-66_400.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://4.bp.blogspot.com/-8o3ogwLGfcI/Um2ZBuURtYI/AAAAAAAALC8/khOtN8bNZTg/s320/free-ads-b-equipment-66_400.jpg" /></a></div>

<p>Amennyiben jó lefedettségű helyen vagyunk, akkor sem kell lemondanunk arról, hogy a repülőgépek jeleit foghassuk, és amennyiben szeretnénk, Pro tagságért cserébe küldjük az adatokat a Flightradar24 szolgáltatásnak. Egyrészt az előbbi egységbe épített ADS-B vevő és dekóder (<a href="http://www.modesbeast.com/">Mode-S Beast</a>) külön is megvásárolható, ami egy professzionális eszköz, ennek megfelelően kb. százezer forintért juthatunk hozzá. Azonban van egy olcsóbb megoldás is. Az <a href="http://www.ebay.com/sch/i.html?_trksid=p2050601.m570.l1313.TR0.TRC0&_nkw=RTL2832U%2FR820T&_sacat=0&_from=R40">EBay-ről rendelve</a> kb. 2000-3000 forintért juthatunk hozzá DVB-T usb stickekhez, melyek az alább leírt módon szintén alkalmasak ADS-B jelek vételére.</p>

<div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-r-gvYPa6UhY/Um2Y_Ycqi2I/AAAAAAAALC0/5MY-X7qQoiA/s1600/dvbt-stick-adsb-receiver-48_380.jpg" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/-r-gvYPa6UhY/Um2Y_Ycqi2I/AAAAAAAALC0/5MY-X7qQoiA/s320/dvbt-stick-adsb-receiver-48_380.jpg" /></a></div>

<p>A DVB-T stickek a digitális földfelszíni videó adások vételére szolgáló eszközök. Azonban hamar rájöttek, hogy ennél sokkal több mindenre használhatóak. Az ADS-B jelek vételére a RTL2832U/E4000 és a RTL2832U/R820T chippel és tunerrel rendelkező eszközök alkalmasak. Ebből is a R820T chippel szerelt számunkra a megfelelő, hiszen érzékenyebb, mint a E4000. A <a href="http://superkuh.com/gnuradio/R820T_datasheet-Non_R-20111130_unlocked.pdf">Rafael Micro R820T</a> egy tuner chip, míg a <a href="http://www.realtek.com.tw/products/productsView.aspx?Langid=1&PFid=35&Level=4&Conn=3&ProdID=257">R820T</a> egy demodulátor chip, mely USB interfésszel, ADC-vel (Analog-to-Digital Converter) és infravörös távirányító porttal is rendelkezik.</p>

<p>Használatához először fel kell telepíteni egy USB drivert, majd egy dekódert. Ez képes adatokkal táplálni a <a href="http://www.flightradar24.com/software">Flightradar24</a> szoftverét. Ezen kívül asztali alkalmazások is tudják ezen adatokat felhasználni, és virtuális radarként működni. Ilyen pl. a <a href="http://www.coaa.co.uk/planeplotter.htm">PlanePlotter</a> alkalmazás is.</p>

<p>A Realtek RTL2832U chippel szerelt DVB-T usb stick egyéb érdekes dolgokra is használható, pl. <a href="http://en.wikipedia.org/wiki/Software-defined_radio">Software-defined radio (SDR)</a> egy ilyen témakör, ahol a rádiózásban tipikusan hardveresen megoldott feladatokat (erősítés, moduláció/demoduláció, stb.) szoftveres úton valósítják meg. Erre egy megoldás a <a href="http://sdr.osmocom.org/trac/wiki/rtl-sdr">RTLSDR</a>. 

<p>Ami érdekes, hogy az eszközhöz adott kis antennával is elég jó eredményt lehet elérni, ha jó helyen van, míg elég komoly tudás szükséges egy olyan antenna megépítéséhez, mely jobban teljesít, és itt már a koax kábel minőségére, hosszára, és az USB kábel hosszára is figyelnünk kell.</p>

<p>A Flightradar24 nem az egyetlen ilyen szolgáltatás, ugyanezen az elven működik a <a href="http://planefinder.net">Plane Finder</a> is. Ők talán nem osztanak meg annyi technikai információt, viszont van egy-két érdekes cikk az ő oldalukon is.</p>